Chapter 3 Linux 用户和权限
=================================
## Section 3.1 root用户
### 1.root用户 vs 普通用户
Windows，MacOS，Linux等系统均采用多用户的管理模式进行权限管理。在Linux系统中，拥有最大权限的账户名为root（超级管理员），root用户拥有最大的系统操作权限，而普通用户在很多地方的权限受到限制。

**例子**：普通用户无法在根目录下创建文件，但是root用户可以；
- 普通用户的权限一般在其home目录内是不受限的；
- 一旦出了home目录，普通用户基本只有**只读**和**执行**权限，没有修改权限；

### 2.切换用户的命令

#### (1) 切换到[用户名]用户
```
su [-] [用户名]
```
#### (2) 回退到上一个用户
```
exit
```
- 使用普通用户切换到root用户，需要输入密码，反之不需要；
- 如果不指定用户名，则默认向root用户切换；

### 3.`sudo`用户
#### (1) `sudo`语法
在我们得知root密码的时候，可以通过su命令切换到root用户得到最大权限，但是不建议长期使用root用户，避免给系统带来破坏。此时，可以使用`sudo`命令，使得普通用户临时以root身份运行。
```
sudo 其他命令
```

- 在其他命令之前带上`sudo`，即可为这一条命令临时赋予root授权；
- 但并不是所有用户都可以使用`sudo`，我们需要为普通用户设置`sudo`认证；


#### (2) 为普通用户配置`sudo`认证
- 切换到root用户，执行`visodu`命令，会自动通过vi编辑器打开：`/etc/sudoers`
- 在文件的最后一行添加
  ```
  普通用户用户名 ALL = (ALL) NOPASSWD: ALL
  ```
- 通过`:wq`保存
- 切换回普通用户
- 执行的命令均已root执行
  
## Section 3.2用户和用户组
### 1.用户和用户组
在Linux系统中可以配置多个用户以及多个用户组，用户可以加个多个用户组中；

Linux中关于权限的管控级别有两个级别，分别是
- 针对用户的权限控制
- 针对用户组的权限控制

### 2.用户组管理
以下命令需要root用户执行
**创建用户组**
```
groupadd 用户组名
```
**删除用户组**
```
groupdel 用户组名
```

### 3.用户管理
以下命令需要root用户执行

**创建用户**
```
useradd [-g -d] 用户名
```
- 选项： `-g` 指定用户的组，不指定-g，会创建同名字的组并自动加入；指定`-g`需要租已经存在，如已经存在同名组，必须使用`-g`；
- 选项： `-d` 指定用户Home路径，不指定，home目录默认在`/home/用户名`；

**删除用户**
```
userdel [-r] 用户名`
```

- 选项： `-r`，删除用户的home目录，不使用-r时，home目录保留
- 注意： 当我们想删除某个用户的时候，出现 user $\mathbf{x x x}$ is currently used by process $\mathbf{x x x}$ ，可能的原因是你创建用户user1之后，使用su命令切换到user1用户下，之后又想删除user1用户，使用su root切换到root用户下，使用userdel user1。出现上述情况的根本原因在于切换回root用户之后，user1还被某个进程占用。解决方案是使用`ctrl+d` (退出当前用户)。第一次使用`ctrl+d`退出root用户，回到user1用户；第二次使用ctrl+d退出user1用户，此时会返回到root用户（再按`ctrl+d`退出登陆连接），此时使用`userdel user1`正常删除。

**查看用户所属组**
```
id [用户名]
```

- 参数： 用户名，被查看的用户，如果不提

